<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>(Work)flow and alternate pipe operator, rationate • svFlow</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="152x152" href="../apple-touch-icon-152x152.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.1/css/all.min.css" integrity="sha256-PbSmjxuVAzJ6FPvNYsrXygfGhNJYyZ2GktDbkMBqQZg=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.1/css/v4-shims.min.css" integrity="sha256-A6jcAdwFD48VMjlI3GDxUd+eCQa7/KWy6G9oe/ovaPA=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><!-- svPkgdown --><script src="../script.js"></script><!-- themify icon --><link rel="stylesheet" href="../themify-icons.css?nocache=123">
<!--<link rel="stylesheet" href="../style.css?nocache=123">--><!-- bootstrat v4.1.1, required CSS from more recent version --><link rel="stylesheet" href="../bootstrap.more.css?nocache=123">
<link href="../style.css?nocache=123" rel="stylesheet">
<!-- end of addition for svPkgdown --><meta property="og:title" content="(Work)flow and alternate pipe operator, rationate">
<!-- Mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.6/MathJax.js" async integrity="sha256-nlrDrBTHxJJlDDX22AS33xYI1OJHnGMDhiYMSe2U0e0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.6/config/TeX-AMS-MML_HTMLorMML.js" async integrity="sha256-4zys9A4hMQmtq2EUL+JRoXc0NZi8jVJMzb8onewOaSQ=" crossorigin="anonymous"></script><!-- Global site tag (gtag.js) - Google Analytics --><!--<script async src="https://www.googletagmanager.com/gtag/js?id=UA-462421-8"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-462421-8');
</script>-->
</head>
<body data-spy="scroll" data-target="#toc">


    <div class="container template-article">
      <header><!-- preloader start --><div class="preloader">
  <img src="../preloader.gif" alt="loading...">
</div>
<!-- preloader end -->

<div class="navbar navbar-default navbar-fixed-top bg-secondary" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <div class="navbar-brand-container">
       <div class="navbar-brand-logo">
         <a class="external-link navbar-brand" href="https://www.sciviews.org">
          <img src="../logo_full.png" alt="SciViews"></a>
       </div>
       <div class="navbar-brand-package">
      </div>
      </div>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <!-- start svPkgdown global site search with Google -->
      <form action="https://www.google.com/search" class="navbar-form navbar-right search-form-global">
        <div class="form-group has-search">
          <span class="fa fa-search form-control-feedback-global"></span>
          <input type="text" class="form-control-global search-form-input" name="q" id="q" placeholder="Search..." required><input type="hidden" name="sitesearch" value="https://www.sciviews.org">
</div>
      </form>
      <!-- end svPkgdown global site search with Google -->
      <ul class="nav navbar-nav navbar-right">
<li>
  <a href="../articles/svFlow.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/svFlow_rationate.html">(Work)flow and alternate pipe operator, rationate</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
        <li>
  <a href="https://github.com/SciViews/svFlow/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul>
<div class="navbar-title">
        <a class="navbar-brand" href="../index.html"><p class="h2">svFlow <small>v1.2.1</small></p></a>
      </div>
    </div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
  <div class="navbar-spacer bg-light">
  </div>
</div>
<!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>(Work)flow and alternate pipe operator,
rationate</h1>
                        <h4 data-toc-skip class="author">Philippe
Grosjean</h4>
            
            <h4 data-toc-skip class="date">2025-08-29</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/SciViews/svFlow/blob/main/vignettes/svFlow_rationate.Rmd" class="external-link"><code>vignettes/svFlow_rationate.Rmd</code></a></small>
      <div class="hidden name"><code>svFlow_rationate.Rmd</code></div>

    </div>

    
    
<div class="section level2">
<h2 id="pure-predictable-pipeable-and-data-aware">Pure, predictable, pipeable, … and data-aware<a class="anchor" aria-label="anchor" href="#pure-predictable-pipeable-and-data-aware"></a>
</h2>
<p>Hadley Wickham advocates for pure, predictable and pipeable functions
in the tidyverse. Although non-standard evaluation (NSE) makes many of
the functions in tidyverse not referentially transparent (which makes
them more difficult in reusable contexts like a function) this also
contributes to a cleaner language, at least for beginneRs. With {svFlow}
we want both to make tidyverse-style NSE more easily reusable, and the
data analysis workflow based on pipelines and the pipe operator
({magrittr}’s pipe operator in tidyverse) even more data-aware.</p>
</div>
<div class="section level2">
<h2 id="choice-of-the-name">Choice of the name<a class="anchor" aria-label="anchor" href="#choice-of-the-name"></a>
</h2>
<p>The initial name was {flow}, because it is short. However, it is now
used by an,other package on CRAN. Other names as {workflow} and
{workplan} are also already used. So, {svFlow} for SciViews’ flow.</p>
<p>The {performanceEstimation} package has {Workflow} object and a
<code>Workflow()</code> function. Also, the {zoon} package has a
<code>workflow()</code> function, but it creates a {zoonWorkflow}
object, so no clash here. In the {drake} package, now superseded by
{targets}, there is also a <code>workflow()</code> function, but
deprecated in favor of <code>workplan()</code>. {targets} is used to
organize different analyses in <strong>data.frame</strong>s. Hence, as
we see here, {workflow} or {workplan} names are already pretty much used
in the R ecosystem.</p>
<p>There is the {flowr} package which uses (internal)
<code><a href="../reference/flow.html">flow()</a></code>, and <code><a href="../reference/flow.html">is.flow()</a></code> functions, and a
<strong>flow</strong> S3 object. This is for complex, bioinformatics
(work)flows, but of course, the source of potential problems when both
{flowr} and {svFlow} packages are used simultaneously, if both objects
bear the same class name. That is why in {svFlow}, objects are named
<strong>Flow</strong> with an uppercase <strong>F</strong>, to avoid
such a conflict.</p>
</div>
<div class="section level2">
<h2 id="a-simpler-and-more-efficient-pipe-operator">A simpler and more efficient pipe operator?<a class="anchor" aria-label="anchor" href="#a-simpler-and-more-efficient-pipe-operator"></a>
</h2>
<p>The {wrapr} package provides an alternate pipe operator:
<code>%.&gt;%</code>, the “dot arrow pipe”. It is very simple:</p>
<blockquote>
<p>“a %.&gt;% b” is to be treated as if the user had written “{ . &lt;-
a; b };” with “%.&gt;%” being treated as left-associative.</p>
</blockquote>
<p>There are three interesting points with this pipe operator:</p>
<ol style="list-style-type: decimal">
<li>It does not alter the expression evaluated, and the dot can be
placed everywhere in the expression. It means that <em>any</em>
expression is suitable and is “pipe-aware” with this operator.</li>
<li>It is <em>explicit</em>, that is, you don’t have to guess what will
happen, the location of the dot replacement(s) in the expression is
explicitly indicated. It should makes it also easier to understand from
a beginneR’s point of view, providing he is not used to {magrittr}
style, of course.</li>
<li>Since the expression is not reworked, it is very fast in comparison
to the complex-rules that must be computed each time you call
{magrittr}’s <code>%&gt;%</code>.</li>
<li>On the contrary to the base R pipe operator <code>|&gt;</code>
introduced in R 4.1.0, it is not just a syntactic flavor that transforms
the code into imbricated functions calls internally. The base R pipe
operator has many advantages, but also many limitations that
<code>%&gt;.%</code> tries to eliminate.</li>
</ol>
<p>The only drawback with this pipe operator is that it is not pure,
since it modifies the calling environment (it assigns <code>.</code> in
it before evaluation of the right-hand side expression). However, if you
never use <code>.</code> as a name for other objects, this is not much a
problem. In {wrapr}, there is a synonym: <code>%&gt;.%</code>, but that
its author never uses in the examples, vignettes or on its blog. So, we
decide to reuse <code>%&gt;.%</code> as our pipe operator in {svFlow}.
We add two things in it:</p>
<ol style="list-style-type: decimal">
<li><p>It is also aware of <strong>Flow</strong> objects (see here
under) and behaves accordingly,</p></li>
<li><p>The expression to be evaluated is also recorded in the calling
environment as <code>.call</code>. This way, it becomes easy to debug
the last expression that failed during the pipeline execution (since
<code>.</code> is also available, one can inspect it, or rerun
<code>eval(.call)</code>, … or use <code><a href="../reference/pipe_operator.html">debug_flow()</a></code> to get
extra information):</p></li>
</ol>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/SciViews/svFlow" class="external-link">svFlow</a></span><span class="op">)</span></span>
<span><span class="co"># An example pipeline with an error in the middle:</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Attaching package: 'dplyr'</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:stats':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     filter, lag</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:base':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     intersect, setdiff, setequal, union</span></span>
<span><span class="va">iris</span> <span class="op"><a href="../reference/pipe_operator.html">%&gt;.%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">.</span>, <span class="va">Sepal.Length</span> <span class="op">&lt;</span> <span class="fl">5.1</span>, <span class="va">Sepal.Width</span> <span class="op">&lt;</span> <span class="fl">3.1</span><span class="op">)</span> <span class="op"><a href="../reference/pipe_operator.html">%&gt;.%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span><span class="va">.</span>, logS <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log</a></span><span class="op">(</span><span class="va">Species</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe_operator.html">%&gt;.%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">.</span>, <span class="va">Species</span><span class="op">)</span> <span class="op"><a href="../reference/pipe_operator.html">%&gt;.%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span><span class="va">.</span>, mean_logS <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">logS</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #BBBB00; font-weight: bold;">Error</span><span style="font-weight: bold;"> in `mutate()`:</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> In argument: `logS = log(Species)`.</span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">Caused by error in `Math.factor()`:</span></span></span>
<span><span class="co">#&gt; <span style="color: #BBBB00;">!</span> 'log' not meaningful for factors</span></span></code></pre></div>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Both . and .call are available and can be explored</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">.</span><span class="op">)</span></span>
<span><span class="co">#&gt;   Sepal.Length Sepal.Width Petal.Length Petal.Width Species</span></span>
<span><span class="co">#&gt; 1          4.9         3.0          1.4         0.2  setosa</span></span>
<span><span class="co">#&gt; 2          4.4         2.9          1.4         0.2  setosa</span></span>
<span><span class="co">#&gt; 3          4.8         3.0          1.4         0.1  setosa</span></span>
<span><span class="co">#&gt; 4          4.3         3.0          1.1         0.1  setosa</span></span>
<span><span class="co">#&gt; 5          5.0         3.0          1.6         0.2  setosa</span></span>
<span><span class="co">#&gt; 6          4.4         3.0          1.3         0.2  setosa</span></span>
<span><span class="va">.call</span></span>
<span><span class="co">#&gt; mutate(., logS = log(Species))</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/eval.html" class="external-link">eval</a></span><span class="op">(</span><span class="va">.call</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #BBBB00; font-weight: bold;">Error</span><span style="font-weight: bold;"> in `mutate()`:</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> In argument: `logS = log(Species)`.</span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">Caused by error in `Math.factor()`:</span></span></span>
<span><span class="co">#&gt; <span style="color: #BBBB00;">!</span> 'log' not meaningful for factors</span></span></code></pre></div>
<p>… or even more easily:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/pipe_operator.html">debug_flow</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; Last expression run in the pipeline:</span></span>
<span><span class="co">#&gt; mutate(., logS = log(Species))</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; with . being:</span></span>
<span><span class="co">#&gt; 'data.frame':    12 obs. of  5 variables:</span></span>
<span><span class="co">#&gt;  $ Sepal.Length: num  4.9 4.4 4.8 4.3 5 4.4 4.5 4.8 4.9 5 ...</span></span>
<span><span class="co">#&gt;  $ Sepal.Width : num  3 2.9 3 3 3 3 2.3 3 2.4 2 ...</span></span>
<span><span class="co">#&gt;  $ Petal.Length: num  1.4 1.4 1.4 1.1 1.6 1.3 1.3 1.4 3.3 3.5 ...</span></span>
<span><span class="co">#&gt;  $ Petal.Width : num  0.2 0.2 0.1 0.1 0.2 0.2 0.3 0.3 1 1 ...</span></span>
<span><span class="co">#&gt;  $ Species     : Factor w/ 3 levels "setosa","versicolor",..: 1 1 1 1 1 1 1 1 2 2 ...</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; producing:</span></span>
<span><span class="co">#&gt; <span style="color: #BBBB00; font-weight: bold;">Error</span><span style="font-weight: bold;"> in `mutate()`:</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> In argument: `logS = log(Species)`.</span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">Caused by error in `Math.factor()`:</span></span></span>
<span><span class="co">#&gt; <span style="color: #BBBB00;">!</span> 'log' not meaningful for factors</span></span></code></pre></div>
<p>From there, you can manipulate <code>.</code>, <code>.call</code>, or
both, and rerun <code><a href="../reference/pipe_operator.html">debug_flow()</a></code> to fix the pipeline.</p>
</div>
<div class="section level2">
<h2 id="mixing-pipe-and-proto-the-flow-object">Mixing Pipe() and proto(): the Flow object<a class="anchor" aria-label="anchor" href="#mixing-pipe-and-proto-the-flow-object"></a>
</h2>
<p>In {pipeR}, Kun Ren proposes several alternative pipe operators to
the now traditional {magrittr}’s one (<code>%&gt;%</code>).
<code>Pipe()</code> is interesting since it encapsulates essentially the
pipeline steps inside an object. The pipe operator is then simply
replaced by <code>$</code>. It is striking to note the similitude of the
<code>$</code> operator for <strong>Pipe</strong> and
<strong>proto</strong> objects (from the {proto} package), although they
are designed for different purposes in mind. The <strong>proto</strong>
objects are class-less prototype-based objects that support simple
inheritance. They are convenient to manipulate sets of objects in a
common place, and internally, they use an environment to store these
objects. <strong>Pipe</strong> objects also use internally an
environment to store everything related to the pipeline operations.
However, there is no mean to add custom objects, nor to define
inheritance between <strong>Pipe</strong> objects. Satellite variables
may be used in pipelines. They are currently placed in the calling
environment (usually <code>.GlobalEnv</code>), and they “pollute” it.
There is no mean to define “local” variables like, say in function, with
the pipe. Yet, if we could combine <strong>Pipe</strong> behavior for
pipeline operation, with <strong>proto</strong> objects to store locally
various items and allow inheritance, this would be a wonderful way to
drive analyses workflows. The <strong>Flow</strong> object just does
that.</p>
<p><strong>Flow</strong> objects are indeed <strong>proto</strong> with
a <code>.value</code> item that contains the result obtained from the
last pipeline operation. The pipe operator <code>%&gt;.%</code> is
behaving differently when a <strong>Flow</strong> object (constructed
using <code><a href="../reference/flow.html">flow()</a></code>) is passed to it: (1) <code>.</code> is taken
from <code>flow_obj$.value</code>, and result updates it. Also, a
<code>..</code> object is created in the calling environment that is the
<strong>Flow</strong> object. That way, one can access items stored in
the <strong>Flow</strong> object by <code>..$item</code> within pipeline
expressions. This allows to embed pipeline temporary variables directly
in the <strong>Flow</strong> object.</p>
<p>The second pipe operator in the {.flow} package,
<code>%&gt;_%</code>, does the opposite to <code>%&gt;.%</code>: it
<strong>constructs</strong> a <code>Flow</code> object if it does not
receives one, and returns a <strong>Flow</strong> object containing the
results in <code>flow_obj$.value</code>. Finally, to get the value out
of a <strong>Flow</strong> object, on can also end the pipeline by
<code>%&gt;_% .</code>, which extracts <code>flow_obj$.value</code> and
returns it. Here is an example of use:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">iris</span><span class="op">)</span></span>
<span><span class="va">fl</span> <span class="op">&lt;-</span> <span class="va">iris</span> <span class="op"><a href="../reference/pipe_operator.html">%&gt;_%</a></span> <span class="co"># Create a Flow object</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">.</span>, <span class="va">Sepal.Length</span> <span class="op">&lt;</span> <span class="fl">5.1</span>, <span class="va">Sepal.Width</span> <span class="op">&lt;</span> <span class="fl">3.1</span><span class="op">)</span> <span class="op"><a href="../reference/pipe_operator.html">%&gt;_%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span><span class="va">.</span>, logSL <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log</a></span><span class="op">(</span><span class="va">Sepal.Length</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co"># Interrupt the pipeline, and inspect or modify the flow object:</span></span>
<span><span class="va">fl</span></span>
<span><span class="co">#&gt; &lt;Flow object with $.value being&gt;</span></span>
<span><span class="co">#&gt;    Sepal.Length Sepal.Width Petal.Length Petal.Width    Species    logSL</span></span>
<span><span class="co">#&gt; 1           4.9         3.0          1.4         0.2     setosa 1.589235</span></span>
<span><span class="co">#&gt; 2           4.4         2.9          1.4         0.2     setosa 1.481605</span></span>
<span><span class="co">#&gt; 3           4.8         3.0          1.4         0.1     setosa 1.568616</span></span>
<span><span class="co">#&gt; 4           4.3         3.0          1.1         0.1     setosa 1.458615</span></span>
<span><span class="co">#&gt; 5           5.0         3.0          1.6         0.2     setosa 1.609438</span></span>
<span><span class="co">#&gt; 6           4.4         3.0          1.3         0.2     setosa 1.481605</span></span>
<span><span class="co">#&gt; 7           4.5         2.3          1.3         0.3     setosa 1.504077</span></span>
<span><span class="co">#&gt; 8           4.8         3.0          1.4         0.3     setosa 1.568616</span></span>
<span><span class="co">#&gt; 9           4.9         2.4          3.3         1.0 versicolor 1.589235</span></span>
<span><span class="co">#&gt; 10          5.0         2.0          3.5         1.0 versicolor 1.609438</span></span>
<span><span class="co">#&gt; 11          5.0         2.3          3.3         1.0 versicolor 1.609438</span></span>
<span><span class="co">#&gt; 12          4.9         2.5          4.5         1.7  virginica 1.589235</span></span></code></pre></div>
<p>With the <strong>Flow</strong> object, you can continue the pipeline
where you left it, because all the required variables are recorded
inside it.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fl</span> <span class="op"><a href="../reference/pipe_operator.html">%&gt;_%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">.</span>, <span class="va">Species</span><span class="op">)</span> <span class="op"><a href="../reference/pipe_operator.html">%&gt;_%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span><span class="va">.</span>, mean_logSL <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">logSL</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe_operator.html">%&gt;_%</a></span> <span class="va">.</span> <span class="co"># Get final result</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 3 × 2</span></span></span>
<span><span class="co">#&gt;   Species    mean_logSL</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> setosa           1.53</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> versicolor       1.60</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> virginica        1.59</span></span></code></pre></div>
<p>With the <code><a href="../reference/flow.html">flow()</a></code> function, you can explicitly create the
<strong>Flow</strong> object and easily add variables to it, including
those you want to keep as <strong>quosure</strong>s (by ending their
names with <code>_</code>):</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fl</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/flow.html">flow</a></span><span class="op">(</span><span class="va">iris</span>, var1_ <span class="op">=</span> <span class="va">Sepal.Length</span>, thresh1 <span class="op">=</span> <span class="fl">5.1</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning: Assigning non-quosure objects to quosure lists is deprecated as of rlang 0.3.0.</span></span>
<span><span class="co">#&gt; Please coerce to a bare list beforehand with `as.list()`</span></span>
<span><span class="co">#&gt; <span style="color: #555555;">This warning is displayed once every 8 hours.</span></span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">fl</span><span class="op">)</span></span>
<span><span class="co">#&gt; Flow object </span></span>
<span><span class="co">#&gt;  $ var1   : language ~Sepal.Length </span></span>
<span><span class="co">#&gt;   ..- attr(*, ".Environment")=&lt;environment: R_GlobalEnv&gt;  </span></span>
<span><span class="co">#&gt;  $ thresh1: num 5.1 </span></span>
<span><span class="co">#&gt;  parent: Flow root</span></span></code></pre></div>
<p>Note that a <strong>quosure</strong> is recorded as <code>var</code>,
not <code>var_</code>! Indeed, everything works as if the trailing
underscore was an unary suffixed operator applied to <code>var</code>,
which converts it into a <strong>quosure</strong>.</p>
<p>You could use <code>var</code> in the pipeline expression to
manipulate the quosure directly, but you would most probably use
<code>var_</code> which will also treat <code>var</code> as a tidyeval
expression and will unquote it transparently in non-standard
expressions. Here is the same pipeline as above, but with all the
possible variables stored either as <strong>quosure</strong>, or as
usual R objects inside the <strong>Flow</strong> object:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fl</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/flow.html">flow</a></span><span class="op">(</span><span class="va">iris</span>,</span>
<span>    var1_      <span class="op">=</span> <span class="va">Sepal.Length</span>,</span>
<span>    var2_      <span class="op">=</span> <span class="va">Sepal.Width</span>,</span>
<span>    var_group_ <span class="op">=</span> <span class="va">Species</span>,</span>
<span>    var1_log_  <span class="op">=</span> <span class="va">logSL</span>,</span>
<span>    var1_mean_ <span class="op">=</span> <span class="va">mean_logSL</span>,</span>
<span>    thresh1    <span class="op">=</span> <span class="fl">5.1</span>,</span>
<span>    thresh2    <span class="op">=</span> <span class="fl">3.1</span><span class="op">)</span> <span class="op"><a href="../reference/pipe_operator.html">%&gt;_%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">.</span>, <span class="va">var1_</span> <span class="op">&lt;</span> <span class="va">thresh1_</span>, <span class="va">var2_</span> <span class="op">&lt;</span> <span class="va">thresh2_</span><span class="op">)</span> <span class="op"><a href="../reference/pipe_operator.html">%&gt;_%</a></span></span>
<span>  <span class="op">{</span><span class="va">..</span><span class="op">$</span><span class="va">temp_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span><span class="va">.</span>, var1_log_ <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log</a></span><span class="op">(</span><span class="va">var1_</span><span class="op">)</span><span class="op">)</span><span class="op">}</span> <span class="op"><a href="../reference/pipe_operator.html">%&gt;_%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">.</span>, <span class="va">var_group_</span><span class="op">)</span> <span class="op"><a href="../reference/pipe_operator.html">%&gt;_%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span><span class="va">.</span>, var1_mean_ <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">var1_log_</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">fl</span><span class="op">)</span></span>
<span><span class="co">#&gt; Flow object </span></span>
<span><span class="co">#&gt;  $ var1_log : language ~logSL </span></span>
<span><span class="co">#&gt;   ..- attr(*, ".Environment")=&lt;environment: R_GlobalEnv&gt;  </span></span>
<span><span class="co">#&gt;  $ var1     : language ~Sepal.Length </span></span>
<span><span class="co">#&gt;   ..- attr(*, ".Environment")=&lt;environment: R_GlobalEnv&gt;  </span></span>
<span><span class="co">#&gt;  $ var2     : language ~Sepal.Width </span></span>
<span><span class="co">#&gt;   ..- attr(*, ".Environment")=&lt;environment: R_GlobalEnv&gt;  </span></span>
<span><span class="co">#&gt;  $ var1_mean: language ~mean_logSL </span></span>
<span><span class="co">#&gt;   ..- attr(*, ".Environment")=&lt;environment: R_GlobalEnv&gt;  </span></span>
<span><span class="co">#&gt;  $ thresh1  : num 5.1 </span></span>
<span><span class="co">#&gt;  $ thresh2  : num 3.1 </span></span>
<span><span class="co">#&gt;  $ var_group: language ~Species </span></span>
<span><span class="co">#&gt;   ..- attr(*, ".Environment")=&lt;environment: R_GlobalEnv&gt;  </span></span>
<span><span class="co">#&gt;  $ temp_data:'data.frame':   12 obs. of  6 variables: </span></span>
<span><span class="co">#&gt;  parent: Flow root</span></span>
<span><span class="va">fl</span><span class="op">$</span><span class="va">temp_data</span> <span class="co"># The temporary variable</span></span>
<span><span class="co">#&gt;    Sepal.Length Sepal.Width Petal.Length Petal.Width    Species    logSL</span></span>
<span><span class="co">#&gt; 1           4.9         3.0          1.4         0.2     setosa 1.589235</span></span>
<span><span class="co">#&gt; 2           4.4         2.9          1.4         0.2     setosa 1.481605</span></span>
<span><span class="co">#&gt; 3           4.8         3.0          1.4         0.1     setosa 1.568616</span></span>
<span><span class="co">#&gt; 4           4.3         3.0          1.1         0.1     setosa 1.458615</span></span>
<span><span class="co">#&gt; 5           5.0         3.0          1.6         0.2     setosa 1.609438</span></span>
<span><span class="co">#&gt; 6           4.4         3.0          1.3         0.2     setosa 1.481605</span></span>
<span><span class="co">#&gt; 7           4.5         2.3          1.3         0.3     setosa 1.504077</span></span>
<span><span class="co">#&gt; 8           4.8         3.0          1.4         0.3     setosa 1.568616</span></span>
<span><span class="co">#&gt; 9           4.9         2.4          3.3         1.0 versicolor 1.589235</span></span>
<span><span class="co">#&gt; 10          5.0         2.0          3.5         1.0 versicolor 1.609438</span></span>
<span><span class="co">#&gt; 11          5.0         2.3          3.3         1.0 versicolor 1.609438</span></span>
<span><span class="co">#&gt; 12          4.9         2.5          4.5         1.7  virginica 1.589235</span></span>
<span><span class="va">fl</span> <span class="op"><a href="../reference/pipe_operator.html">%&gt;_%</a></span> <span class="va">.</span> <span class="co"># The final results</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 3 × 2</span></span></span>
<span><span class="co">#&gt;   Species    mean_logSL</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> setosa           1.53</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> versicolor       1.60</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> virginica        1.59</span></span></code></pre></div>
<p>Notice that, even standard variables, like <code>thresh1</code> or
<code>thresh2</code> must be called <code>thresh1_</code> and
<code>thresh2_</code> to look for them <strong>inside</strong> the
<strong>Flow</strong> object. Otherwise, they will be looked for in the
calling environment as usual. Also, the <code>Flow</code> object can be
accessed and manipulated directly through <code>..</code> if you need
to.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

      </div>

</div>



      <footer><!-- footer --><!--<footer class="bg-secondary">--><div class="bg-secondary full-width">
    <div class="py-100 border-bottom" style="border-color: #454547 !important">
        <div class="container">
            <div class="row">
                <div class="col-lg-4 col-md-4">
                    <div class="mb-5 mb-md-0 text-center text-md-left">
                        <!-- logo -->
                        <img class="mb-30" src="https://www.sciviews.org/images/logo-footer.png" alt="logo"><p class="text-white mb-30"> We build software for reproducible research with R</p>
                        <!-- social icon -->
                        <ul class="list-inline">
<li class="list-inline-item">
                                <a class="external-link social-icon-outline" href="https://github.com/SciViews">
                                    <i class="ti-github"></i>
                                </a>
                            </li>

                            <li class="list-inline-item">
                                <a class="external-link social-icon-outline" href="https://twitter.com/PhilGrosjean">
                                    <i class="ti-twitter-alt"></i>
                                </a>
                            </li>

                            <li class="list-inline-item">
                                <a class="external-link social-icon-outline" href="https://www.linkedin.com/in/philippe-grosjean-5b6b29a2/">
                                    <i class="ti-linkedin"></i>
                                </a>
                            </li>

                        </ul>
</div>
                </div>
                <!-- footer links -->
                <div class="col-lg-2 col-md-4 col-6">
                    <p class="h4 text-white mb-4">Related</p>
                    <ul class="footer-links">
<li>
                            <a href="http://econum.umons.ac.be" class="external-link">Our Lab</a>
                        </li>

                        <li>
                            <a href="https://web.umons.ac.be/fs/en/" class="external-link">Our Faculty</a>
                        </li>

                        <li>
                            <a href="https://web.umons.ac.be/complexys/en/" class="external-link">Complexys</a>
                        </li>

                        <li>
                            <a href="https://web.umons.ac.be/infortech/en/" class="external-link">InforTech</a>
                        </li>

                        <li>
                            <a href="https://web.umons.ac.be/en/" class="external-link">UMONS</a>
                        </li>

                    </ul>
</div>
                <!-- footer links -->
                <div class="col-lg-2 col-md-4 col-6">
                    <p class="h4 text-white mb-4">Quick Link</p>
                    <ul class="footer-links">
<li>
                            <a href="https://www.sciviews.org/software/svbox" class="external-link">SciViews Box</a>
                        </li>

                        <li>
                            <a href="https://www.sciviews.org/software/sciviews-r" class="external-link">SciViews::R</a>
                        </li>

                        <li>
                            <a href="https://www.sciviews.org/software/zooimage" class="external-link">Zoo/PhytoImage</a>
                        </li>

                        <li>
                            <a href="https://www.sciviews.org/blog" class="external-link">Blog</a>
                        </li>

                        <li>
                            <a href="https://www.sciviews.org/about" class="external-link">About</a>
                        </li>

                    </ul>
</div>
                <!-- subscribe form -->
                <div class="col-lg-3 col-md-12 offset-lg-1">
                    <div class="mt-5 mt-lg-0 text-center text-md-left">
                             <p class="h4 mb-4 text-white">Contact Us</p>
                             <p class="text-white mb-4">Need more info?<br><a href="mailto:info@sciviews.org"><span class="text-primary">Leave us a mail...</span></a></p>

                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- copyright -->
    <div class="pt-4 pb-3 position-relative">
        <div class="container">
            <div class="row">
                <div class="col-lg-6 col-md-5">
                    <p class="text-white text-center text-md-left">
                        <span class="text-primary">SciViews</span> © All Right Reserved</p>
                </div>
                <div class="col-lg-6 col-md-7">
                    <ul class="list-inline text-center text-md-right">
<li class="list-inline-item mx-lg-3 my-lg-0 mx-2 my-2">
                            <a class="external-link font-secondary text-white" href="https://creativecommons.org/licenses/by/4.0/">Site content under CC-BY 4.0 license</a>
                        </li>

                    </ul>
</div>
            </div>
        </div>
        <!-- back to top -->
        <!--<button class="back-to-top">
            <i class="ti-angle-up"></i>
        </button>-->
    </div>
</div>
<!--</footer>-->
<!-- /footer -->

      </footer>
</div>






  </body>
</html>
